<div class="node-container">
  <div class="node" [ngClass]="{ 'unset-node': node.type === 'unset' }">
    @if(node.type === 'unset') {
    <div class="choose-file-folder">
      <button class="file-folder-button" (click)="updateNodeType('folder')">
        Add Folder
      </button>
      <button class="file-folder-button" (click)="updateNodeType('file')">
        Add File
      </button>
    </div>
    } @if(node.type === 'file' || node.type === 'folder') { @if(node.name) {
    <div class="node-items">
      <img
        class="button-img"
        [src]="node.type === 'file' ? 'file-regular.svg' : 'folder-regular.svg'"
      />
      <span class="name">{{ node.name }}</span>
      @if(node.type === 'folder'){
      <button class="transparent-button" (click)="addNode()">
        <img class="button-img" src="add-icon.svg" />
      </button>
      }
      <button class="transparent-button" (click)="removeNode()">
        <img class="button-img" src="delete.svg" />
      </button>
    </div>
    } @else {
    <div class="node-items">
      <img
        class="button-img"
        [src]="node.type === 'file' ? 'file-regular.svg' : 'folder-regular.svg'"
      />
      <input class="node-name" #nodeName />
      <button
        class="transparent-button"
        (click)="updateNodeName(nodeName.value)"
      >
        <img class="button-img" src="tick.svg" />
      </button>
      <button class="transparent-button" (click)="removeNode()">
        <img class="button-img" src="close.svg" />
      </button>
    </div>
    } }
  </div>
</div>

@if(node.children?.length) {
<div class="child">
  @for (child of node.children; track child) {
  <app-child-node
    [node]="child"
    (removeEvent)="removeChildNode($event)"
  ></app-child-node>
  }
</div>
}
